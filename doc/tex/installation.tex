\chapter{installation}
\label{ch:installation}
\lstset{language=Bash}

Successful building of \verb|slacx| depends on a few trusty, stable packages.
Developers should take care to favor a stable and cross-platform utility
over a fancier option, in order to keep installation of \verb|slacx| fast and easy.


\section{system dependencies}

The packages described in this section 
may already be prepared on your operating system.
If you have already used \verb|pip| to install packages before,
you can probably skip this section entirely
and move on to section~\ref{subsec:virtualenv}.


\subsection{pip, setuptools, and wheel}

\verb|pip| is a Python package manager
(acronym: \verb|pip| Installs Python). 
There are other ways to install packages, but for now
this documentation will cover the usage of \verb|pip|.
\verb|setuptools| is a Python library that supports
many of the operations performed in this section.
\verb|wheel| is a package distribution and installation library 
supporting the \verb|wheel| distribution standard.
Users will typically want to install these together.

\verb|pip|, \verb|setuptools|, and \verb|wheel| are installed by default 
on many Linux distributions and OSX, but should be upgraded.
Enterprise Linux (e.g. RHEL, CentOS, SL, OL) are the exception.
Enterprise Linux users should skip ahead 
to section~\ref{subsec:setup_rhel}.
For other Linux distributions (Fedora, Ubuntu, etc.)
it is suggested that the user employ the system's package manager 
(skip ahead to section~\ref{subsec:setup_non-enterprise}),
though the user may choose instead 
to use \verb|pip| to upgrade itself, as shown below.

Perform the upgrade by typing:
\begin{lstlisting}
pip install -U pip setuptools
\end{lstlisting}


\subsection{pip, wheel, and setuptools for non-Enterprise Linux}
\label{subsec:setup_non-enterprise}

The instructions differ for the various distributions.
The commands listed here are copied 
from the web at \verb|https://packaging.python.org/|.
Enter the commands in a terminal, 
as listed for your particular distribution.
If your distribution is not covered here, 
please consider adding its instructions to the docs
and submitting a pull request.

\begin{itemize}
\item Fedora 21: 
    \begin{lstlisting}
    sudo yum upgrade python-setuptools
    sudo yum install python-pip python-wheel
    \end{lstlisting}
\item Fedora 22: 
    \begin{lstlisting}
    sudo dnf upgrade python-setuptools
    sudo dnf install python-pip python-wheel
    \end{lstlisting}
\item Debian/Ubuntu: 
    \begin{lstlisting}
    sudo apt-get install python-setuptools python-pip python-wheel
    \end{lstlisting}
\end{itemize}


\subsection{pip, wheel, and setuptools for Enterprise Linux}
\label{subsec:setup_rhel}

\textit{tested on RHEL 6.8 (Santiago)}

\subsubsection{adding the EPEL repository}

NOTE: You may already have connection to the \verb|EPEL| repository.
You can tell if you have \verb|EPEL| connected by entering:
\begin{lstlisting}
sudo yum repolist all
\end{lstlisting}
Look through the list, 
under the \verb|repo name| heading,
for a repo named \verb|EPEL|.
If you have it, skip ahead to section~\ref{subsubsec:pip_from_epel}.

The easiest way to maintain \verb|pip|, \verb|setuptools|, and \verb|wheel|
is to enable the \verb|EPEL| repository (Extra Packages for Enterprise Linux)
for your particular distribution.
The \verb|EPEL| SIG (Special Interest Group) 
maintains \verb|rpm| installers that add \verb|EPEL| 
to RHEL's \verb|yum| repository list.
Begin by downloading this installer
and running it with \verb|rpm|.

These instructions assume you are using RHEL6,
where the \verb|EPEL| installer will be 
\verb|epel-release-latest-6.noarch.rpm|.
For other Enterprise Linux distributions,
check the web at \verb|https://fedoraproject.org/wiki/EPEL|
for the correct \verb|EPEL| installer file,
and replace \verb|epel-release-latest-6.noarch.rpm|
in the following instructions with the appropriate filename.
\begin{lstlisting}
wget https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm
rpm -i epel-release-latest-6.noarch.rpm  
\end{lstlisting}
These commands should enable \verb|EPEL|.


\subsubsection{installing pip from EPEL}
\label{subsubsec:pip_from_epel}

\verb|pip| is one (important) package that can be obtained from \verb|EPEL|.
In many cases, \verb|pip| can be obtained simply by running:
\begin{lstlisting}
sudo yum install python-pip
\end{lstlisting}
In some cases, the \verb|python-pip| package will not be found,
for example if the user's local network overloads \verb|EPEL|.
One possibility is that the package will have a different name
in the user's specific set of repositories.
The next thing to try is:
\begin{lstlisting}
sudo yum install python27-python-pip
\end{lstlisting}
If this doesn't work, 
the user must find a package that provides \verb|pip|.
Try the following:
\begin{lstlisting}
sudo yum whatprovides *python-pip*
\end{lstlisting}
This may return a package name like 
\verb|python27-python-pip-1.5.6-5.el6.noarch|.
Try directly installing that package:
\begin{lstlisting}
sudo yum install python27-python-pip-1.5.6-5.el6.noarch
\end{lstlisting}



\subsection{setting up a virtual environment with virtualenv}
\label{subsec:virtualenv}

At this point, it is assumed the user has working installations of
\verb|pip|, \verb|wheel|, and \verb|setuptools|.
This will be the default case for many systems.

Users familiar with \verb|virtualenv| may choose to skip this section.
Building software in a virtual environment is suggested 
as a way of sandboxing libraries that are used by other system components.
After setting up \verb|pip|, \verb|setuptools|, and \verb|wheel| (above),
the installation and setup of a virtual environment is easy.

Begin by installing \verb|virtualenv|:
\begin{lstlisting}
pip install virtualenv
\end{lstlisting}

Now, assuming you want to put \verb|slacx| in directory \verb|<dir>|, 
execute the following in a terminal

\begin{lstlisting}
mkdir <dir> 
virtualenv <dir>
source <dir>/bin/activate
# To terminate virtualenv session:
deactivate
\end{lstlisting}




\subsection{installing python dependencies}

After installing the system packages and starting a virtual environment (above),
the installation of the necessary Python packages should be easy.
Install each of these packages by \verb|pip install <packagename>|.

NOTE: If you are installing \verb|slacx| 
from a wheel-compatible distribution, 
the dependencies will be handled automatically,
so there is no need to do this.

\begin{itemize}
\item \verb|numpy|: Python numerical computation library
\item \verb|scipy|: Python scientific math library
\item \verb|PySide|: Python \verb|Qt| bindings library
%\item \verb|fabio|: Fable I/O library for reading image files from common detectors 
%\item \verb|pyFAI|: Fast Azimuthal Integration library for reducing image data
%\item \verb|h5py|: Library for manipulating files of the fast-readable hdf5 format
%\item \verb|PyOpenGL|: Python bindings for OpenGL graphics library
%\item \verb|PyOpenCL|: Python bindings for the OpenCL parallel computing framework
%\item \verb|PyYAML|: Python library for YAML serialization language 
%\item \verb|qtconsole|: A terminal for executing python code including inline Qt figures
\item \verb|PyQtGraph|: Scientific visualization library built on PyQt4/PySide
\item \verb|QDarkStyle|: A dark stylesheet for the Qt GUI- your eyes will be happier
\item \verb|pillow|: A replacement for the outdated Python Imaging Library (PIL)
\end{itemize}



